###类加载
类从被加载到虚拟机内存中开始，到卸载出内存为止，他的生命周期主要包括7个阶段，如图：  
![](https://i.imgur.com/g82BPov.jpg)  
加载、验证、准备、初始化和卸载这5个阶段的顺序是确定的，而解析阶段则不一定，它在某些情况下可以在初始化阶段之后再开始，这是为了支持java语言的运行时绑定。
####加载
在加载阶段，虚拟机需要完成以下三件事：  

		1. 通过一个类全限定名称类获取定义此类的二进制字节流。
		2. 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。
		3. 在内存中生成一个代表这个类的java.lang.Class对象，作为方法去这个类的各种数据的访问入口。

####验证
为了确保Class文件的字节流信息包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全。从执行性能的角度上讲，验证阶段的工作量在虚拟机的类加载子系统中占了相当大的一部分。如果验证到不符合Class文件格式的约束，就会抛出一个**java.lang.VerifyError**异常或其子类异常。验证阶段大致上会完成下面4个阶段的校验动作：文件格式验证、元数据验证、字节码验证、符号引用验证。
#####1.文件格式验证
验证字节流是否符合Class文件格式的规范，并且能否被当前版本的虚拟机处理。

	- 是否以魔数0xCAFEBABE开头。
	- 主次版本好是否在当前虚拟机处理范围之内。
	- 检查常量池中是否有不被支持的常量类型。
	···
只有通过了这个阶段的验证后，字节流才会进入内存的方法去中进行存储。
#####2.元数据验证
主要目的是对类的元数据信息进行语义校验，保证不存在不符合java语言规范的与数据信息。
#####3.字节码验证
这个阶段将对类的方法进行校验分析，保证校验类的方法在运行时不会做出危害虚拟机安全的事件。
#####4.符号引用验证